name: Run PowerShell Command on Repository Changes

on:
  push:
    branches:
      - main  # Runs when changes are pushed to the main branch
  workflow_dispatch:  # Allows manual trigger from GitHub Actions UI

jobs:
  run-command:
    runs-on: windows-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set Execution Policy for PowerShell
        run: |
          Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process

      - name: Run PowerShell Command
        run: |
          powershell -ExecutionPolicy Bypass -Command "C:\Users\Mandar.Shinde\Repository\EasyMorph\run-morph.ps1"